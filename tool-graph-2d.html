<!doctype html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>2Dグラフ | Mcommon Study</title>
    <link rel="stylesheet" href="/css/style.css" />
    <!-- Plotly（2D/3D共通で使うならどこか1回読み込めばOK） -->
    <script src="https://cdn.plot.ly/plotly-2.35.2.min.js"></script>
  </head>
  <body>
    <div id="site-header"></div>

    <div class="page">
      <main id="main-content" class="wrapper">
        <h1 class="section-title">2Dグラフ</h1>

        <section class="glass-card" style="max-width: 900px;">
          <p class="muted">
            関数表示 <strong>y = f(x)</strong> と、媒介変数表示 <strong>x = f(t), y = g(t)</strong> に対応した 2D グラフツールです。
            <br />sin, cos, tan, exp, log, sqrt, abs, pi などが使えます。
          </p>

          <!-- モード切り替え -->
          <div class="tabs" style="margin-top: var(--space-md);">
            <button type="button" class="tab-btn active" data-mode="yx">y = f(x)</button>
            <button type="button" class="tab-btn" data-mode="param">x = f(t), y = g(t)</button>
          </div>

          <!-- エラーメッセージ -->
          <p id="graph-2d-error" class="error-message" style="margin-top: var(--space-sm); min-height: 1.2em;"></p>

          <!-- y = f(x) モード -->
          <div class="graph-mode graph-mode-yx">
            <div class="form" style="display:grid;gap:var(--space-sm);margin-top:var(--space-md);">
              <label class="form-label" for="expr-yx">関数 y = f(x)</label>
              <input
                class="form-input"
                id="expr-yx"
                placeholder="例: sin(x) / x"
                value="sin(x)"
              />

              <div style="display:flex;gap:var(--space-sm);flex-wrap:wrap;">
                <div style="flex:1 1 120px;">
                  <label class="form-label" for="yx-xmin">x 最小</label>
                  <input class="form-input" id="yx-xmin" type="number" value="-10" step="0.5" />
                </div>
                <div style="flex:1 1 120px;">
                  <label class="form-label" for="yx-xmax">x 最大</label>
                  <input class="form-input" id="yx-xmax" type="number" value="10" step="0.5" />
                </div>
                <div style="flex:1 1 140px;">
                  <label class="form-label" for="yx-steps">分割数</label>
                  <input class="form-input" id="yx-steps" type="number" value="400" min="50" max="2000" />
                </div>
              </div>

              <div class="actions" style="margin-top:var(--space-sm);">
                <button class="btn btn-primary" id="btn-yx-plot" type="button">
                  グラフを描画
                </button>
              </div>
            </div>
          </div>

          <!-- 媒介変数モード x=f(t), y=g(t) -->
          <div class="graph-mode graph-mode-param" style="display:none;">
            <div class="form" style="display:grid;gap:var(--space-sm);margin-top:var(--space-md);">
              <label class="form-label" for="expr-xt">x = f(t)</label>
              <input
                class="form-input"
                id="expr-xt"
                placeholder="例: cos(t)"
                value="cos(t)"
              />

              <label class="form-label" for="expr-yt">y = g(t)</label>
              <input
                class="form-input"
                id="expr-yt"
                placeholder="例: sin(t)"
                value="sin(t)"
              />

              <div style="display:flex;gap:var(--space-sm);flex-wrap:wrap;">
                <div style="flex:1 1 120px;">
                  <label class="form-label" for="t-min">t 最小</label>
                  <input class="form-input" id="t-min" type="number" value="0" step="0.5" />
                </div>
                <div style="flex:1 1 120px;">
                  <label class="form-label" for="t-max">t 最大</label>
                  <input class="form-input" id="t-max" type="number" value="6.283" step="0.5" />
                </div>
                <div style="flex:1 1 140px;">
                  <label class="form-label" for="t-steps">分割数</label>
                  <input class="form-input" id="t-steps" type="number" value="400" min="50" max="2000" />
                </div>
              </div>

              <div class="actions" style="margin-top:var(--space-sm);">
                <button class="btn btn-primary" id="btn-param-plot" type="button">
                  グラフを描画
                </button>
              </div>
            </div>
          </div>

          <!-- グラフ表示エリア -->
          <div id="graph-2d-container" style="margin-top: var(--space-lg);">
            <div
              id="graph-2d"
              style="width:100%;min-height:380px;border-radius:var(--radius-card);overflow:hidden;"
            ></div>
          </div>
        </section>
      </main>
    </div>

    <div id="chatbot-slot"></div>
    <div id="site-footer"></div>

    <script src="/js/layout.js"></script>
    <script src="/js/tool-graph-2d.js"></script>
  </body>
</html>
